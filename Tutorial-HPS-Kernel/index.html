
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://insper.github.io/Embarcados-Avancados/Tutorial-HPS-Kernel/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.2">
    
    
      
        <title>Compilando o kernel - Eletiva: SoC e Linux Embarcado</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans+Extra+Condensed:700|Oxygen+Mono|Source+Sans+Pro:700|Source+Serif+Pro&amp;display=swap">
<link rel="stylesheet" href="../assets/css/devlife.css">


    <script>
        window.ihandout_config = JSON.parse(`{"report": {"url": "https://devlife.insper-comp.com.br/api/offerings/1/exercises/"}}`);
    </script>


  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#compilando-o-kernel" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Eletiva: SoC e Linux Embarcado" class="md-header__button md-logo" aria-label="Eletiva: SoC e Linux Embarcado" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Eletiva: SoC e Linux Embarcado
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Compilando o kernel
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/insper/Embarcados-Avancados" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Insper/Embarcados-Avancados
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Tutorial-HPS/" class="md-tabs__link md-tabs__link--active">
        HPS
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Tutorial-HPS-FPGA-BlinkLED/" class="md-tabs__link">
        HPS + FPGA
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Tutorial-Acelerando-HLS/" class="md-tabs__link">
        Acelerando
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Tutorial-FPGA-RTL/" class="md-tabs__link">
        FPGA
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../Projeto-Overview/" class="md-tabs__link">
        Tutoriais Alunos
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../info-FPGA-e-Softwares/" class="md-tabs__link">
        √öteis
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Eletiva: SoC e Linux Embarcado" class="md-nav__button md-logo" aria-label="Eletiva: SoC e Linux Embarcado" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Eletiva: SoC e Linux Embarcado
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/insper/Embarcados-Avancados" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Insper/Embarcados-Avancados
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          HPS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HPS" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          HPS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-HPS/" class="md-nav__link">
        Vis√£o geral
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-HPS-Running/" class="md-nav__link">
        Linux embarcado
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-HPS-BuildSystem/" class="md-nav__link">
        Configurando infra
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-HPS-BlinkLED/" class="md-nav__link">
        ARM BlinkLED
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info-HPS-ethernet/" class="md-nav__link">
        Extra: configurando rede
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Entrega-4/" class="md-nav__link">
        üëÅ Entrega 1
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Compilando o kernel
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Compilando o kernel
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kernel-44" class="md-nav__link">
    Kernel 4.4
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configurando-o-kernel" class="md-nav__link">
    Configurando o kernel
  </a>
  
    <nav class="md-nav" aria-label="Configurando o kernel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configurando" class="md-nav__link">
    Configurando
  </a>
  
    <nav class="md-nav" aria-label="Configurando">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-loadable-module-support" class="md-nav__link">
    Enable loadable module support
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#support-for-large-2tb-block-devices-and-files" class="md-nav__link">
    Support for large (2TB+) block devices and files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-extended-4-ext4-filesystem" class="md-nav__link">
    The Extended 4 (ext4) filesystem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#altera-socfpga-family" class="md-nav__link">
    Altera SOCFPGA family
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symmetric-multi-processing" class="md-nav__link">
    Symmetric Multi-Processing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#device-drivers" class="md-nav__link">
    Device Drivers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#salvando" class="md-nav__link">
    Salvando
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#config" class="md-nav__link">
    .config
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilando" class="md-nav__link">
    Compilando
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executando" class="md-nav__link">
    Executando
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mouse-teclado" class="md-nav__link">
    Mouse/ Teclado?
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-HPS-Buildroot/" class="md-nav__link">
        Buildroot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Entrega-5/" class="md-nav__link">
        üëÅ Entrega 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-HPS-DeviceDriver1/" class="md-nav__link">
        Device Driver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-HPS-kernel-module/" class="md-nav__link">
        Kernel module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-HPS-kernel-chardriver/" class="md-nav__link">
        Char device driver
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          HPS + FPGA
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HPS + FPGA" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          HPS + FPGA
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-HPS-FPGA-BlinkLED/" class="md-nav__link">
        Blink FPGA LED
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-HPS-FPGA-kernel-char-led-driver/" class="md-nav__link">
        Char LED device driver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-HPS-FPGA-VGA/" class="md-nav__link">
        VGA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Entrega-6/" class="md-nav__link">
        üëÅ Entrega 6
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Acelerando
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Acelerando" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Acelerando
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-Acelerando-HLS/" class="md-nav__link">
        Acelerando - HLS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Entrega-Extra-1/" class="md-nav__link">
        üëÅ Entrega 7
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          FPGA
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="FPGA" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          FPGA
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-FPGA-RTL/" class="md-nav__link">
        RTL / VHDL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Entrega-1/" class="md-nav__link">
        üëÅ Entrega 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-FPGA-NIOS/" class="md-nav__link">
        NIOS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Entrega-2/" class="md-nav__link">
        üëÅ Entrega 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Entrega-3/" class="md-nav__link">
        üëÅ Entrega 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Tutorial-FPGA-NIOS-IP/" class="md-nav__link">
        IP Core
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Tutoriais Alunos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutoriais Alunos" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Tutoriais Alunos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Projeto-Overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Projeto-Rubrica/" class="md-nav__link">
        Rubrica
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/Insper/Embarcados-Avancados-Template" class="md-nav__link">
        Template markdown
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2020/PS3-Linux-Tutorial/" class="md-nav__link">
        PS3 Hack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2020/Android/" class="md-nav__link">
        Android para Raspbery Pi 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2020/LED-HW/" class="md-nav__link">
        Perif√©rico para controlar matriz de led da fam√≠lia WS281x
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2020/LED-Linux/" class="md-nav__link">
        Driver linux para acender leds
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2020/python/" class="md-nav__link">
        Soc & Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2020/metropolis/" class="md-nav__link">
        SDAccel / Vitis - Algoritmo metropolis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2020/Audio/" class="md-nav__link">
        √Åudio na DE10
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2020/cripto/" class="md-nav__link">
        Criptografia em Hardware Fpga
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2019/Gabriel-TensorFlow/" class="md-nav__link">
        TensorFlow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2019/Leo-OpenCL/" class="md-nav__link">
        OpenCL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2019/Elisa-Yocto/" class="md-nav__link">
        Yocto
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2019/Pedro-OpenCV/" class="md-nav__link">
        Jetson Nano GPU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2019/Martim-F1/" class="md-nav__link">
        FPGA na AWS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2019/Toranja-DevDriver/" class="md-nav__link">
        Linux Device Driver
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          √öteis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="√öteis" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          √öteis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info-FPGA-e-Softwares/" class="md-nav__link">
        Infraestrutura de HW e SWs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info-VHDL/" class="md-nav__link">
        VHDL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info-SDcard/" class="md-nav__link">
        Atualizando o SDCARD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info-HPS-Serial/" class="md-nav__link">
        Screen
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../info-HPS-ethernet/" class="md-nav__link">
        Ethernet
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/Insper/Embarcados-Avancados/edit/master/docs-src/Tutorial-HPS-Kernel.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="compilando-o-kernel">Compilando o kernel<a class="headerlink" href="#compilando-o-kernel" title="Permanent link">¬∂</a></h1>
<iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/SOXeXauRAm0" width="560"></iframe>
<hr/>
<iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/FEfSlk1EHNI" width="560"></iframe>
<p>Nesse tutorial iremos compilar o kernel do Linux para o ARM do nosso SoC usando o toolchain que j√° temos configurado.</p>
<h2 id="kernel-44">Kernel 4.4<a class="headerlink" href="#kernel-44" title="Permanent link">¬∂</a></h2>
<p>Clone o kernel do linux :</p>
<div class="highlight"><pre><span></span><code>$ git clone https://github.com/torvalds/linux 
$ <span class="nb">cd</span> linux
</code></pre></div>
<blockquote>
<p>Isso pode demorar um pouquinho, o kernel √© um projeto grande.</p>
</blockquote>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>O reposit√≥rio oficial do kernel do linus √© o : <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git</a> por√©m clonar dele √© normalmente muito mais lento que do github (que √© apenas um mirror do reposit√≥rio oficial).</p>
</div>
<p>Vamos trabalhar com a vers√£o <code>4.4</code> do kernel que √© uma vers√£o com: <code>Long Time Suport</code> (LTS), ou seja, ser√° mantida por muito mais tempo que as outras vers√µes. A vers√£o 4.4 foi lan√ßada em 10 de Janeiro e ser√° mantida oficialmente at√© 2021, ela tamb√©m √© uma vers√£o chamada de Super LTS, com suporte estendido at√© 2036. </p>
<details class="linux kernel wikipidia - vers√µes">
<summary>Linux</summary>
<p><iframe height="300" src="https://en.wikipedia.org/wiki/Linux_kernel" title="Linux Kernel" width="100%"> </iframe></p>
</details>
<p>Pense que um desenvolvedor de um sistema embarcado, que vai criar toda uma infra dedicada n√£o quer ficar ter que ajustando e validando tudo novamente s√≥ para ter a vers√£o mais nova do kenrel. A ideia de usar uma com maior suporte √© minimizar esfor√ßos com recursos novos.</p>
<p>O kernel utiliza o sistema de <code>tag</code> do git:</p>
<div class="highlight"><pre><span></span><code>$ git tag
...
v2.6.11
v2.6.11-tree
v2.6.12
v2.6.12-rc2
v2.6.12-rc3
v2.6.12-rc4
v2.6.12-rc5
v2.6.12-rc6
v2.6.13-rc2
v2.6.14-rc2
v2.6.14-rc3
...
</code></pre></div>
<p>Note que revis√µes √≠mpares s√£o para Karnel em est√°gio de desenvolvimento, e n√∫meros pares para vers√£o de produ√ß√£o, exemplo :</p>
<ul>
<li><strong>Linux 2.4.x</strong> - Produ√ß√£o</li>
<li><strong>Linux 2.5.x</strong> - Desenvolvimento </li>
<li><strong>Linux 2.6.x</strong> - Produ√ß√£o</li>
<li>....</li>
</ul>
<p>Vamos criar um branch da vers√£o v4.4, para  isso execute o comando a seguir:</p>
<div class="highlight"><pre><span></span><code>$ git checkout v4.4
$ git checkout -b <span class="m">4</span>.4-SoC
</code></pre></div>
<h2 id="configurando-o-kernel">Configurando o kernel<a class="headerlink" href="#configurando-o-kernel" title="Permanent link">¬∂</a></h2>
<p>Uma vez no branch <code>4.4-SoC</code> precisamos configurar o kernel para nosso processador (ARM) e fazer as configura√ß√µes necess√°rias no kernel. Primeiramente iremos gerar um arquivo de configura√ß√£o <code>.config</code> padr√£o para SoCs ARM Altera:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">export</span> <span class="nv">ARCH</span><span class="o">=</span>arm        <span class="c1"># indica a arquitetura do Kernel</span>
$ make socfpga_defconfig <span class="c1"># gera o arquivo padr√£o de configura√ß√£o para SoC</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As configura√ß√£o do kernel ficam salvos no arquivo: <code>.config</code> na raiz do reposit√≥rio. Quando executamos o comando <code>make socfpga_defconfig</code>, o mesmo √© inicializado com algumas configura√ß√µes padr√µes. Voc√™ pode dar uma olhada na pasta: <a href="https://github.com/torvalds/linux/blob/master/arch/arm/configs/socfpga_defconfig">linux/arch/arm/configs/socfpga_defconfig</a>.</p>
</div>
<p>Agora vamos configurar alguns par√¢metros espec√≠ficos do Kernel para a nossa aplica√ß√£o:</p>
<div class="highlight"><pre><span></span><code>$ make <span class="nv">ARCH</span><span class="o">=</span>arm menuconfig 
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Talvez seja necess√°rio instalar o pacote <strong>libncurses5-dev</strong></p>
<div class="highlight"><pre><span></span><code>$ sudo apt install libncurses5-dev
</code></pre></div>
</div>
<p>Esse comando ir√° abrir a interface de configura√ß√£o do Kernel do Linux (existem outras op√ß√µes: <code>make xconfig</code>; <code>make config</code>; <code>make gconfig</code>, ...). Essa interface permite selecionarmos v√°rias configura√ß√µes do Kernel. Agora iremos seguir o roteiro proposto no tutorial a seguir, traduzido de maneira reduzida aqui. </p>
<ul>
<li><a href="https://rocketboards.org/foswiki/Documentation/EmbeddedLinuxBeginnerSGuide">https://rocketboards.org/foswiki/Documentation/EmbeddedLinuxBeginnerSGuide</a></li>
</ul>
<h3 id="configurando">Configurando<a class="headerlink" href="#configurando" title="Permanent link">¬∂</a></h3>
<ol>
<li>
<p>Automatically append version information to the version string</p>
</li>
<li>
<p>General Setup <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/></p>
<ul>
<li><strong>Desabilite</strong>: <em>Automatically append version information to the version string</em></li>
</ul>
</li>
</ol>
<p><img alt="" src="../figs/Tutorial-HPS-Kernel%3Aconfig.gif"/></p>
<div class="admonition note">
<p class="admonition-title">Exclude/ Include</p>
<p>Para <strong>Desativar</strong> utilize a letra <code>N</code> do teclado, para incluir a letra <code>Y</code></p>
</div>
<div class="admonition note">
<p class="admonition-title">D√∫vidas?</p>
<p>A maioria dos par√¢metros possui uma explica√ß√£o, basta apertar <code>?</code> para ler a respeito.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>ref :  <a href="https://rocketboards.org/foswiki/Documentation/EmbeddedLinuxBeginnerSGuide#8">https://rocketboards.org/foswiki/Documentation/EmbeddedLinuxBeginnerSGuide#8</a></li>
</ul>
<p>Go into the ‚ÄúGeneral Setup‚Äù menu. Uncheck ‚ÄúAutomatically append version information to the version string‚Äù. This will prevent the kernel from adding extra ‚Äúversion‚Äù information to the kernel. Whenever we try to dynamically load a driver (also called kernel modules, as discussed in a later section) the kernel will check to see if the driver was built with the same version of the source code as itself. If it isn‚Äôt, it will reject to load that driver. For development, it‚Äôs useful to disable these options to make it easier to test out different versions of drivers. In a production system however, it‚Äôs recommend to keep this option enabled and only use drivers that were compiled with the correct version of the kernel.
I encourage you to peruse the options in the General Setup menu and see what‚Äôs available to you (hitting ‚Äú?‚Äù to view the help info for the highlighted option). Of particular importance to us is the ‚ÄúEmbedded System‚Äù option (turns on advanced features) and the type of SLAB allocator used (determines how memory will be dynamically allocated in the kernel). If you want to use an initial ram disk or ram filesystem that would be enabled here as well (these will be explained in the next section).
(texto extra√≠do da refer√™ncia)</p>
</div>
<hr/>
<h4 id="enable-loadable-module-support">Enable loadable module support<a class="headerlink" href="#enable-loadable-module-support" title="Permanent link">¬∂</a></h4>
<ul>
<li>Volte para o menu principal (<code>&lt;ESC&gt;</code> <code>&lt;ESC&gt;</code>) <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/><ul>
<li>Note que o <em>Enable loadable module support</em> est√° ativado.</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p>Isso permite que o kernel seja modificado (pelo carregamento de drivers) ap√≥s a sua execu√ß√£o. Isso ser√° √∫til quando formos desenvolver nosso pr√≥prio device driver, sem a necessidade de recompilarmos o kernel toda vez que desejamos testar uma modifica√ß√£o no c√≥digo. √â essa configura√ß√£o que permite utilizarmos USBs, SSDs, placas de rede via a possibilidade do carregamento de drivers de forma din√¢mica pelo sistema operacional.</p>
</div>
<hr/>
<h4 id="support-for-large-2tb-block-devices-and-files">Support for large (2TB+) block devices and files<a class="headerlink" href="#support-for-large-2tb-block-devices-and-files" title="Permanent link">¬∂</a></h4>
<ul>
<li>No menu principal <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/> Enable the block layer <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/><ul>
<li><strong>Ative</strong>: <code>Support for large (2TB+) block devices and files</code></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p>Essa op√ß√£o ir√° permitir a utiliza√ß√£o de parti√ß√µes do tipo EXT4. Se esquecer essa op√ß√£o e o kernel tiver em uma parti√ß√£o EXT4 a mesma ser√° montada como READ-ONLY.</p>
</div>
<hr/>
<h4 id="the-extended-4-ext4-filesystem">The Extended 4 (ext4) filesystem<a class="headerlink" href="#the-extended-4-ext4-filesystem" title="Permanent link">¬∂</a></h4>
<ul>
<li>Menu principal <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/> File systems <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/> <ul>
<li>Note que j√° est√° selecionado: <code>The Extended 4 (ext4) filesystem</code></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p>Essa op√ß√£o ir√° possibilitar que o kernel monte dispositivos formatados em EXT4. Pretendemos usar isso no SDCARD.</p>
</div>
<hr/>
<h4 id="altera-socfpga-family">Altera SOCFPGA family<a class="headerlink" href="#altera-socfpga-family" title="Permanent link">¬∂</a></h4>
<ul>
<li>Menu principal <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/> System Type <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/><ul>
<li>Note que j√° est√° selecioado: <code>Altera SOCFGPA family</code></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p>Isso indica para o kernel qual ser√° o dispositivo que o mesmo ser√° executado, note que esssa op√ß√£o possui um novo menu onde podemos ativar ou n√£o a suspens√£o para RAM.</p>
</div>
<hr/>
<h4 id="symmetric-multi-processing">Symmetric Multi-Processing<a class="headerlink" href="#symmetric-multi-processing" title="Permanent link">¬∂</a></h4>
<ul>
<li>Menu principal <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/> Kernel Features <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/><ul>
<li>Note que j√° est√° selecioado: <code>Symmmetric Multi-Processing</code></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p>Essa op√ß√£o indica para o kernel que ele deve utilizar os dois cores presente no ARM HPS da FPGA. </p>
</div>
<hr/>
<h4 id="device-drivers">Device Drivers<a class="headerlink" href="#device-drivers" title="Permanent link">¬∂</a></h4>
<ul>
<li>Menu principal <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/> Device Drivers <img alt="‚û°Ô∏è" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/svg/27a1.svg" title=":arrow_right:"/> <ul>
<li>Analise os drivers dispon√≠veis...</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p>Indica quais drivers ser√£o compilados junto com o kernel, note que j√° temos configurado drivers de rede (Network device support); GPIO (GPIO Support); RTC; DMA; ... . Lembre que j√° inicializamos o <code>.config</code> com uma configura√ß√£o padr√£o para SoCs Altera.</p>
</div>
<h3 id="salvando">Salvando<a class="headerlink" href="#salvando" title="Permanent link">¬∂</a></h3>
<p>Aperte ESC duas vezes (<code>&lt;ESC&gt;</code> <code>&lt;ESC&gt;</code>) e salve as configura√ß√µes no arquivo <code>.config</code></p>
<h3 id="config"><code>.config</code><a class="headerlink" href="#config" title="Permanent link">¬∂</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>De uma olhada no arquivo <code>.config</code> gerado! As vezes √© mais f√°cil editar direto nele, do que ter que abrir o menu de configura√ß√£o e encontrar o local de ativar um m√≥dulo.</p>
</div>
<h2 id="compilando">Compilando<a class="headerlink" href="#compilando" title="Permanent link">¬∂</a></h2>
<p>O makefile utiliza a vari√°vel <code>CROSS_COMPILE</code> para definir o toolchain que ir√° fazer a compila√ß√£o do kernel, vamos definir como sendo o GCC do Linaro baixado recentemente:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">export</span> <span class="nv">CROSS_COMPILE</span><span class="o">=</span><span class="nv">$GCC_Linaro</span>/arm-linux-gnueabihf-
</code></pre></div>
<p>Para compilarmos o kernel :</p>
<div class="highlight"><pre><span></span><code>make <span class="nv">ARCH</span><span class="o">=</span>arm <span class="nv">LOCALVERSION</span><span class="o">=</span> zImage -j <span class="m">4</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>-j4 executa a compila√ß√£o em 4 threads, voc√™ pode ajustar esse valor para adequar ao seu processador.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Dica</p>
<p>Adicione o <code>export CROSS_COMPILE=....</code> ao seu <code>.bashrc</code> para n√£o ter que ficar digitando isso sempre que tiver que compilar o kernel.</p>
</div>
<div class="admonition fail">
<p class="admonition-title">Fail</p>
<p>Caso aconte√ßa algum erro de build, deve-se verificar o path do <code>CROSS_COMPILE</code> ou se existe alguma depend√™ncia que n√£o foi satisfeita.</p>
</div>
<p>Esse comando faz com que o kernel do linux seja compilado em uma vers√£o compactada que √© auto-extra√≠da. Outras op√ß√µes seriam :</p>
<ul>
<li>Image : Bin√°rio do kernel</li>
<li>zImage: vers√£o compactada que possui <em>self-extracting</em></li>
<li>uImage: uma vers√£o que j√° possui o bootloader uboot</li>
</ul>
<p>1^: <a href="https://stackoverflow.com/questions/22322304/image-vs-zimage-vs-uimage">https://stackoverflow.com/questions/22322304/image-vs-zimage-vs-uimage</a> </p>
<div class="admonition tip">
<p class="admonition-title">Kernel compilado</p>
<p>o zImage √© salvo em:</p>
<ul>
<li><code>arch/arm/boot/zImage</code></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">zImage</p>
<p>Esse arquivo √© o bin√°rio que cont√©m o kernel do linux e ser√° executado no sistema embarcado.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Atualizando o SDCARD</p>
<p>Agora devemos atualizar o kernel que est√° no SDCard, para isso basta:</p>
<ol>
<li>inserir o sdcard no pc</li>
<li>montar a parti√ß√£o 1</li>
<li>substituir o zImage que est√° no SDCARD pelo o gerado dentro da pata <code>arch/arm/boot/zImage</code></li>
<li>ejetar o sdcard ou executar o comando <code>sync</code></li>
<li>coloque o SDCARD na placa e ligar a FPGA</li>
</ol>
</div>
<h2 id="executando">Executando<a class="headerlink" href="#executando" title="Permanent link">¬∂</a></h2>
<p>Para verificar se tudo est√° certo, basta colocar o cart√£o de mem√≥ria no kit e verificar a vers√£o do kernel em execu√ß√£o:</p>
<div class="highlight"><pre><span></span><code>$ uname -a
Linux buildroot <span class="m">4</span>.14.0 <span class="c1">#1 SMP Mon Jul 16 21:22:58 -03 2018 armv7l GNU/Linux</span>
</code></pre></div>
<h2 id="mouse-teclado">Mouse/ Teclado?<a class="headerlink" href="#mouse-teclado" title="Permanent link">¬∂</a></h2>
<p>Mouse e teclado funcionam de imediato? Tentei plugar um mouse USB na placa, ele √© reconhecido pelo Linux? N√£o deveria. Para funcionar voc√™ deve voltar nas configura√ß√µes do kernel do linux e inserir os drivers que gereciam USB e HID. Compilar, substituit o zImage no sdcard e testar novamente.</p>
<div class="admonition info">
<p class="admonition-title">Como verificar se o mouse est√° funcionando?</p>
<ol>
<li>Digite 'lsusb', ele deve mostrar que reconheceu um mouse</li>
<li>Ap√≥s conectar o mouse, digite <code>tail dmesg</code>, ele deve mostrar que reconheceu um novo device USB e que associou ele com um mouse</li>
<li>O mouse no linux √© montado em <code>/dev/input/mice</code>, para ver se est√° funcionando voc√™ pode executar: <code>cat /dev/input/mice</code>, mexa o mouse para ver se aparece alguma coisa na tela</li>
</ol>
</div>
<div class="admonition tip">
<p class="admonition-title">Human Interface Devices (HID)</p>
<p>HID √© um tipo de dispositivo reconhecido pelo Kenel do Linux como um dispositivo de interface com o usu√°rio, esse tipo de dispositivo √© normalmente reconhecido automaticamente pelos kernels, po√≠s eles implementam um pad√£o de comunica√ß√£o.</p>
<ul>
<li><a href="https://www.kernel.org/doc/html/latest/hid/index.html">https://www.kernel.org/doc/html/latest/hid/index.html</a></li>
</ul>
<p>O USB tamb√©m possui uma classifica√ß√£o de dispositivos do tipo HID, que facilita o uso dos mesmos pelo kernel:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/USB_human_interface_device_class">https://en.wikipedia.org/wiki/USB_human_interface_device_class</a></li>
</ul>
</div>




              
            </article>
            
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../Entrega-4/" class="md-footer__link md-footer__link--prev" aria-label="Previous: üëÅ Entrega 1" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              üëÅ Entrega 1
            </div>
          </div>
        </a>
      
      
        
        <a href="../Tutorial-HPS-Buildroot/" class="md-footer__link md-footer__link--next" aria-label="Next: Buildroot" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Buildroot
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019 / Prof. Rafael Corsi / rafael.corsi@insper.edu.br
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "toc.integrate", "content.tabs.link"], "search": "../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.0.0/js-yaml.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/gh/insper-education/active-handout-plugins-js@main/package/plugin-bundle.js"></script>
      
    
  </body>
</html>